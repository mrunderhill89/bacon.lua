class = class or require("Class")
Observable = Observable or require("Observable")
EventStream = EventStream or require("EventStream")
History = History or require("History")

local numbers = EventStream.new():log("Numbers")
local sum = numbers:scan(0, function(s,n) return s+n end):log("Sum")
local even = numbers:filter(function(value) return value % 2 == 0 end):log("Even")
local odd = sum:yield():filter(function(value) return value % 2 == 1 end):log("Odd")
_.eachi(_.range(1000), function(value)
	numbers:push(value)
end)
numbers:close()
